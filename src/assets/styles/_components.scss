@use 'sass:color';
@use 'variables' as *;

@layer components {
  // Button Components
  .btn {
    @apply inline-block px-6 py-3 rounded-md font-semibold transition-all duration-300 border-0 cursor-pointer;
  }

  .btn.btn-primary {
    @apply text-white;
    background-color: $accent-color;
    &:hover { 
      background-color: color.adjust($accent-color, $lightness: -10%); 
      transform: translateY(-2px); 
    }
  }

  .btn.btn-secondary {
    @apply text-white border-2;
    background-color: transparent;
    border-color: $white;
    &:hover { background-color: $white; color: $primary-color; }
  }

  .btn.btn-outline {
    @apply border-2;
    background-color: transparent;
    color: $primary-color;
    border-color: $primary-color;
    &:hover { background-color: $primary-color; color: $white; }
  }

  .btn.btn-full {
    @apply w-full text-center;
  }

  .btn .btn-sm {
    @apply px-3 py-1.5 text-sm rounded-md;
  }

  .btn.btn-disabled,
  .btn:disabled {
    @apply cursor-not-allowed pointer-events-none opacity-60;
    background-color: color.adjust($primary-color, $lightness: 35%);
    color: black;
    border-color: color.adjust($primary-color, $lightness: 35%);
    transform: none;
  }

  // Form Components
  .form-group {
    @apply mb-6;
  }

  .form-group .form-label {
    @apply block mb-2 font-semibold text-gray-900;
  }

  .form-group .form-input {
    @apply w-full p-3 rounded-lg text-base transition outline-none border-2 border-gray-200;
  }

  .form-group .form-input:focus {
    @apply border-blue-500 shadow-[0_0_0_3px_rgba(59,130,246,0.1)];
  }

  .form-group .form-input.error {
    @apply border-red-500;
  }

  .form-error {
    @apply text-red-500 text-sm mt-2;
  }

  /* Auth buttons */
  .btn-login {
    @apply inline-block w-full px-4 py-2 rounded-md bg-blue-500 text-white font-semibold hover:bg-blue-600 transition disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-register {
    @apply inline-block w-full px-4 py-2 rounded-md bg-blue-500 text-white font-semibold hover:bg-blue-600 transition disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-back {
    @apply inline-block w-full px-4 py-2 rounded-md text-blue-500 font-semibold hover:text-blue-600 text-center;
  }

  // Checkbox styling
  input[type="checkbox"] {
    @apply w-5 h-5 rounded border-2 border-gray-300 bg-white cursor-pointer transition;
  }

  input[type="checkbox"]:checked {
    @apply border-blue-500 bg-blue-500;
    background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3e%3c/svg%3e");
  }

  input[type="checkbox"]:focus {
    @apply outline-none border-blue-500 shadow-[0_0_0_3px_rgba(59,130,246,0.1)];
  }

  input[type="checkbox"].error {
    @apply border-red-500;
  }

  // Card Components
  .card {
    @apply bg-white rounded-2xl p-8 shadow-md transition-transform duration-300;
  }

  .card:hover {
    @apply -translate-y-0.5;
  }

  .card.card-feature {
    @apply text-center;
  }

  .card.card-feature .card-icon {
    @apply w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-6 text-white; background-color: $primary-color;
  }

  .card.card-feature .card-title {
    @apply text-2xl font-bold text-gray-900 mb-2;
  }

  .card.card-feature .card-description {
    @apply text-gray-500 leading-relaxed;
  }
}

// Image Preview component
@layer components {
  /* Modal styles (media left, comments right) */
  .modal-overlay {
    @apply fixed inset-0 z-50 flex items-center justify-center bg-black/50;
  }

  .modal-container {
    @apply w-full max-w-5xl bg-white rounded-2xl shadow-xl overflow-hidden;
  }

  .modal-header {
    @apply flex items-center justify-between border-b border-gray-200 px-4 py-3;
  }

  .modal-close {
    @apply inline-flex h-8 w-8 items-center justify-center rounded-md text-gray-500 hover:bg-gray-100 hover:text-gray-700;
  }

  .post-modal {
    @apply grid grid-cols-1 md:grid-cols-[1.3fr_1fr];
    min-height: 70vh;
    max-height: 85vh;
  }

  .post-modal-media {
    @apply bg-black flex items-center justify-center p-3 md:p-4;
  }

  .post-modal-media img,
  .post-modal-media video {
    @apply max-h-[85vh] w-auto h-auto rounded-xl;
  }

  .post-modal-comments {
    @apply flex flex-col bg-white p-4;
  }

  .comments-scroll {
    @apply flex-1 overflow-y-auto space-y-4 pr-2;
  }

  .comment-item {
    @apply flex gap-3;
  }
  .comment-item .author-avatar {
    @apply w-9 h-9 rounded-full overflow-hidden flex-shrink-0;
  }

  .comment-item .author-avatar img {
    @apply w-full h-full object-cover;
  }

  .comment-item .comment-body {
    @apply flex-1;
  }

  .comment-item .comment-meta {
    @apply text-sm text-gray-600 mb-1; 
  }

  .comment-item .comment-name {
    @apply font-medium text-gray-900;
  }

  .comment-item .comment-time {
    @apply text-gray-400 text-xs;
  }

  .comment-item .comment-text {
    @apply text-sm text-gray-800;
  }

  .comment-input {
    @apply mt-4 pt-3 border-t border-gray-200 flex items-center gap-2;
  }

  .comment-field {
    @apply flex-1 p-2.5 rounded-lg bg-gray-50 border border-gray-200 text-sm focus:outline-none focus:border-blue-500 focus:bg-white focus:shadow-[0_0_0_3px_rgba(59,130,246,0.1)];
  }

  .comment-send {
    @apply px-3 py-2 text-sm bg-blue-500 text-white rounded-md hover:bg-blue-600 transition;
  }

  .image-preview {
    @apply mt-4 w-full max-w-xl;

    .image-grid {
      @apply grid grid-cols-2 gap-1 rounded-xl overflow-hidden;
    }

    .image-tile {
      @apply w-full object-cover cursor-pointer;
    }

    // Heights
    .image-tile-sm {
      @apply h-48;
    }

    .image-tile-md {
      @apply h-64;
    }

    .image-tile-lg {
      height: 400px;
    }

    .tile-wrapper {
      @apply relative;
    }

    .tile-overlay {
      @apply absolute inset-0 bg-black/50 text-white text-2xl font-semibold flex items-center justify-center;
    }
  }
}